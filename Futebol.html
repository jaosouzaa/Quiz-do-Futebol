<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz de Futebol com Ranking e Opções Embaralhadas</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #0a192f;
    color: #fff;
    text-align: center;
    margin: 0; padding: 0;
  }
  .quiz-container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
  }
  h1 {
    margin-bottom: 10px;
    color: #00ff9d;
  }
  .question {
    font-size: 1.2em;
    margin: 20px 0;
  }
  .options button {
    display: block;
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    font-size: 1em;
    background: #112240;
    color: #fff;
    border: 2px solid #00ff9d;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
  }
  .options button:hover {
    background: #00ff9d;
    color: #0a192f;
  }
  .result, .timer {
    font-size: 1.3em;
    margin-top: 20px;
  }
  #ranking {
    margin-top: 30px;
    text-align: left;
  }
  #ranking h2 {
    color: #00ff9d;
  }
  #ranking ol {
    padding-left: 20px;
  }
  #ranking li {
    margin-bottom: 6px;
    font-size: 1em;
  }
  button#restart {
    margin-top: 20px;
    padding: 12px 20px;
    font-size: 1.1em;
    background: #00ff9d;
    border: none;
    border-radius: 8px;
    color: #0a192f;
    cursor: pointer;
    font-weight: bold;
  }
</style>
</head>
<body>
<div class="quiz-container">
  <h1>Quiz de Futebol</h1>
  <div id="quiz">
    <div class="timer">Tempo: <span id="time">0</span> s</div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div id="feedback"></div>
  </div>
  <div class="result" id="result"></div>
  <button id="restart" style="display:none;">Reiniciar Quiz</button>
  <div id="ranking" style="display:none;">
    <h2>Ranking Local (Top 5)</h2>
    <ol id="ranking-list"></ol>
  </div>
</div>

<script>
const questions = [
  {
    question: "Qual seleção venceu a Copa do Mundo de 2002?",
    options: ["Alemanha", "Brasil", "Itália", "França"],
    answer: "Brasil"
  },
  {
    question: "Quem é o maior artilheiro da história da Copa do Mundo?",
    options: ["Pelé", "Ronaldo", "Klose", "Messi"],
    answer: "Klose"
  },
  {
    question: "Qual clube brasileiro é conhecido como 'Galo'?",
    options: ["Atlético Mineiro", "Flamengo", "Corinthians", "Grêmio"],
    answer: "Atlético Mineiro"
  },
  {
    question: "Qual país sediou a Copa do Mundo de 2010?",
    options: ["Brasil", "África do Sul", "Alemanha", "Japão"],
    answer: "África do Sul"
  },
  {
    question: "Qual jogador é conhecido como 'O Fenômeno'?",
    options: ["Romário", "Neymar", "Ronaldo", "Ronaldinho Gaúcho"],
    answer: "Ronaldo"
  }
];

let currentQuestion = 0;
let score = 0;
let startTime = null;
let timerInterval = null;

const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const feedbackEl = document.getElementById("feedback");
const resultEl = document.getElementById("result");
const timeEl = document.getElementById("time");
const restartBtn = document.getElementById("restart");
const rankingEl = document.getElementById("ranking");
const rankingListEl = document.getElementById("ranking-list");
const quizEl = document.getElementById("quiz");

// Função para embaralhar array (Fisher-Yates)
function shuffleArray(arr) {
  for(let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function startTimer() {
  startTime = Date.now();
  timerInterval = setInterval(() => {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    timeEl.textContent = elapsed;
  }, 250);
}

function stopTimer() {
  clearInterval(timerInterval);
}

function showQuestion() {
  const q = questions[currentQuestion];
  questionEl.textContent = q.question;
  optionsEl.innerHTML = "";
  feedbackEl.textContent = "";

  // Embaralhar opções
  const shuffledOptions = shuffleArray([...q.options]);
  shuffledOptions.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(opt, q.answer);
    optionsEl.appendChild(btn);
  });

  if(currentQuestion === 0) startTimer();
}

function checkAnswer(selected, correct) {
  if (selected === correct) {
    score++;
    feedbackEl.textContent = "✅ Resposta correta!";
    feedbackEl.style.color = "#00ff9d";
  } else {
    feedbackEl.textContent = "❌ Resposta errada! Correto: " + correct;
    feedbackEl.style.color = "#ff4d4d";
  }
  currentQuestion++;
  setTimeout(() => {
    if (currentQuestion < questions.length) {
      showQuestion();
    } else {
      endQuiz();
    }
  }, 1000);
}

function endQuiz() {
  stopTimer();
  quizEl.style.display = "none";
  const totalTime = Math.floor((Date.now() - startTime) / 1000);
  resultEl.textContent = `Você acertou ${score} de ${questions.length} perguntas em ${totalTime} segundos.`;
  restartBtn.style.display = "inline-block";
  rankingEl.style.display = "block";
  updateRanking(score, totalTime);
  displayRanking();
}

function updateRanking(score, time) {
  const storageKey = "quizFutebolRanking";
  const rank = JSON.parse(localStorage.getItem(storageKey)) || [];
  rank.push({score, time, date: new Date().toISOString()});
  rank.sort((a,b) => {
    if (b.score !== a.score) return b.score - a.score;
    return a.time - b.time;
  });
  if(rank.length > 5) rank.length = 5;
  localStorage.setItem(storageKey, JSON.stringify(rank));
}

function displayRanking() {
  const rank = JSON.parse(localStorage.getItem("quizFutebolRanking")) || [];
  rankingListEl.innerHTML = "";
  rank.forEach((entry, idx) => {
    const date = new Date(entry.date);
    const li = document.createElement("li");
    li.textContent = `${idx+1}. Acertos: ${entry.score}, Tempo: ${entry.time}s, em ${date.toLocaleDateString()}`;
    rankingListEl.appendChild(li);
  });
}

restartBtn.onclick = () => {
  currentQuestion = 0;
  score = 0;
  quizEl.style.display = "block";
  resultEl.textContent = "";
  restartBtn.style.display = "none";
  rankingEl.style.display = "none";
  timeEl.textContent = "0";
  showQuestion();
};

showQuestion();
</script>
</body>
</html>
